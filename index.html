<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baker Bettie's Master Recipe Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f8fafc; }
        .module-btn.active { background-color: #fff7ed; color: #c2410c; border-right: 4px solid #fb923c; }
        .checkbox-checked { background-color: #f0fdf4; border-color: #bbf7d0; }
        .strikethrough { text-decoration: line-through; color: #9ca3af; }
        
        /* Custom Scrollbar for cleaner look */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body class="h-screen flex flex-col md:flex-row overflow-hidden text-slate-800">

    <!-- MOBILE HEADER -->
    <div class="md:hidden bg-white p-4 border-b border-gray-200 flex justify-between items-center z-20">
        <span class="font-bold text-lg text-orange-600">Baker Bettie Tracker</span>
        <button id="menu-toggle" class="text-slate-600 focus:outline-none">
            <i data-lucide="menu"></i>
        </button>
    </div>

    <!-- SIDEBAR -->
    <div id="sidebar" class="fixed inset-y-0 left-0 transform -translate-x-full md:relative md:translate-x-0 w-64 bg-white border-r border-gray-200 flex flex-col h-full z-10 shadow-lg transition-transform duration-200 ease-in-out">
        <div class="p-6 border-b border-gray-100 bg-orange-50">
            <h1 class="font-bold text-xl text-slate-800 tracking-tight flex items-center gap-2">
                <i data-lucide="chef-hat" class="text-orange-500"></i>
                Baking Track
            </h1>
            <p class="text-xs text-slate-500 mt-1">Master Recipe Curriculum</p>
            
            <div class="mt-6">
                <div class="flex justify-between text-xs font-bold text-slate-500 uppercase tracking-wider mb-2">
                    <span>Progress</span>
                    <span id="progress-text">0%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                    <div id="progress-bar" class="bg-orange-500 h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
                </div>
            </div>
        </div>
        
        <div class="flex-1 overflow-y-auto" id="sidebar-nav">
            <!-- Nav Items Injected via JS -->
        </div>
        
        <!-- SYNC SECTION -->
        <div class="p-4 border-t border-gray-100 bg-slate-50">
            <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2">Sync Devices</p>
            <div class="flex gap-2">
                <button onclick="exportData()" class="flex-1 flex flex-col items-center justify-center p-2 bg-white border border-slate-200 rounded text-xs text-slate-600 hover:text-orange-600 hover:border-orange-300 transition-colors">
                    <i data-lucide="upload-cloud" class="w-4 h-4 mb-1"></i>
                    Backup
                </button>
                <button onclick="importData()" class="flex-1 flex flex-col items-center justify-center p-2 bg-white border border-slate-200 rounded text-xs text-slate-600 hover:text-orange-600 hover:border-orange-300 transition-colors">
                    <i data-lucide="download-cloud" class="w-4 h-4 mb-1"></i>
                    Restore
                </button>
            </div>
        </div>
    </div>

    <!-- OVERLAY FOR MOBILE -->
    <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-0 hidden md:hidden"></div>

    <!-- MAIN CONTENT -->
    <div class="flex-1 overflow-y-auto bg-slate-50 p-6 md:p-10" id="main-content">
        <!-- Content Injected via JS -->
    </div>

    <script>
        // --- DATA STRUCTURE ---
        const modules = {
            fundamentals: {
                title: "1. The Fundamentals",
                icon: "flask-conical",
                desc: "The 'Grammar' of baking. Understand the science before you mix.",
                steps: [
                    { id: 'f1', type: 'Read', title: 'The Function of Flour', link: 'https://bakerbettie.com/function-of-flour-in-baking/', note: 'Understand protein percentages and gluten formation.' },
                    { id: 'f2', type: 'Read', title: 'The Function of Sugar', link: 'https://bakerbettie.com/function-of-sugar-in-baking/', note: 'Sugar provides moisture and tenderness, not just sweetness.' },
                    { id: 'f3', type: 'Video', title: 'How to Measure Ingredients', link: 'https://bakerbettie.com/how-to-measure-flour/', note: 'CRITICAL: Watch the "Scoop and Level" technique video.' },
                    { id: 'f4', type: 'Read', title: 'Mise En Place', link: 'https://bakerbettie.com/mise-en-place-baking-prep/', note: 'Why you should prep everything before mixing.' }
                ]
            },
            muffins: {
                title: "2. The Muffin Method",
                icon: "coffee",
                desc: "Liquid into Dry. The foundation of all quick breads.",
                steps: [
                    { id: 'm1', type: 'Video', title: 'Technique: Muffin Method', link: 'https://www.youtube.com/watch?v=S33wPrQYAXo', note: 'Notice how lumpy she leaves the batter. Overmixing = tough muffins.' },
                    { id: 'm2', type: 'Recipe', title: 'MASTER RECIPE: Basic Muffins', link: 'https://bakerbettie.com/master-muffin-recipe/', note: 'Your blank canvas. Bake this first.' },
                    { id: 'm3', type: 'Read', title: 'Muffin Variations', link: 'https://bakerbettie.com/5-easy-muffin-variations/', note: 'How to add fruit/nuts without ruining the chemistry.' }
                ]
            },
            biscuits: {
                title: "3. The Biscuit Method",
                icon: "layers",
                desc: "Cutting in Fat. Cold butter equals flaky layers.",
                steps: [
                    { id: 'b1', type: 'Video', title: 'Technique: Making Biscuits', link: 'https://bakerbettie.com/how-to-make-biscuits/', note: 'Visual guide to "pea-sized crumbs" vs "cornmeal texture".' },
                    { id: 'b2', type: 'Recipe', title: 'MASTER RECIPE: Flaky Biscuits', link: 'https://bakerbettie.com/best-buttermilk-biscuits/', note: 'The holy grail: Tall, flaky, buttermilk goodness.' },
                    { id: 'b3', type: 'Recipe', title: 'Variation: Master Scones', link: 'https://bakerbettie.com/master-scone-recipe/', note: 'Similar method, but with richer ingredients (egg/cream).' }
                ]
            },
            creaming: {
                title: "4. The Creaming Method",
                icon: "cookie",
                desc: "Butter + Sugar + Air. The basis for cookies and cakes.",
                steps: [
                    { id: 'c1', type: 'Read', title: 'Science of Creaming', link: 'https://bakerbettie.com/creaming-method-cake-making/', note: 'Why we beat butter/sugar for 5 mins (aeration).' },
                    { id: 'c2', type: 'Video', title: 'Cookie Science', link: 'https://bakerbettie.com/the-science-of-the-chocolate-chip-cookie/', note: 'Understanding Chewy vs. Crispy vs. Cakey.' },
                    { id: 'c3', type: 'Recipe', title: 'MASTER RECIPE: Chewy Cookies', link: 'https://bakerbettie.com/the-best-chewy-chocolate-chip-cookies/', note: 'The gold standard cookie base.' }
                ]
            },
            yeast: {
                title: "5. Yeast Breads",
                icon: "wheat",
                desc: "Patience and Kneading. Building strong gluten structures.",
                steps: [
                    { id: 'y1', type: 'Read', title: 'Yeast Essentials', link: 'https://bakerbettie.com/yeast-essentials-everything-you-need-to-know-to-bake-with-yeast/', note: 'Difference between Active Dry and Instant Yeast.' },
                    { id: 'y2', type: 'Video', title: 'Technique: Kneading', link: 'https://bakerbettie.com/how-to-knead-bread/', note: 'How to perform the Windowpane Test.' },
                    { id: 'y3', type: 'Recipe', title: 'MASTER RECIPE: White Bread', link: 'https://bakerbettie.com/simple-white-bread-recipe/', note: 'A classic sandwich loaf to practice your kneading.' }
                ]
            },
            pastry: {
                title: "6. Pie & Pastry",
                icon: "circle-dashed",
                desc: "Temperature control. Keep everything cold!",
                steps: [
                    { id: 'p1', type: 'Video', title: 'Technique: Pie Crust', link: 'https://bakerbettie.com/how-to-make-pie-crust/', note: 'Handling dough without melting the butter.' },
                    { id: 'p2', type: 'Recipe', title: 'MASTER RECIPE: Flaky Crust', link: 'https://bakerbettie.com/all-butter-flaky-pie-crust/', note: 'The all-butter standard crust.' }
                ]
            }
        };

        // --- STATE MANAGEMENT ---
        let activeModule = 'fundamentals';
        let completed = JSON.parse(localStorage.getItem('bakerBettieProgress')) || {};

        // --- CORE FUNCTIONS ---
        
        function toggleComplete(id) {
            if (completed[id]) {
                delete completed[id];
            } else {
                completed[id] = true;
            }
            saveData();
            renderContent();
            renderSidebar();
            updateProgress();
        }

        function saveData() {
            localStorage.setItem('bakerBettieProgress', JSON.stringify(completed));
        }

        function updateProgress() {
            let totalSteps = 0;
            let completedSteps = 0;

            Object.values(modules).forEach(mod => {
                mod.steps.forEach(step => {
                    totalSteps++;
                    if (completed[step.id]) completedSteps++;
                });
            });

            const percentage = Math.round((completedSteps / totalSteps) * 100);
            document.getElementById('progress-bar').style.width = `${percentage}%`;
            document.getElementById('progress-text').innerText = `${percentage}%`;
        }

        // --- EXPORT / IMPORT FUNCTIONS ---
        function exportData() {
            // Create a simple base64 encoded string of the progress
            const dataStr = btoa(JSON.stringify(completed));
            navigator.clipboard.writeText(dataStr).then(() => {
                alert("Progress Code copied to clipboard! \n\nSend this code to your other device and use the 'Restore' button.");
            }).catch(() => {
                prompt("Copy this code to transfer your progress:", dataStr);
            });
        }

        function importData() {
            const dataStr = prompt("Paste your progress code here:");
            if (!dataStr) return;

            try {
                const parsed = JSON.parse(atob(dataStr));
                if (typeof parsed === 'object') {
                    completed = parsed;
                    saveData();
                    renderSidebar();
                    renderContent();
                    alert("Progress restored successfully!");
                }
            } catch (e) {
                alert("Invalid code. Please try again.");
            }
        }

        // --- RENDER FUNCTIONS ---
        function renderSidebar() {
            const nav = document.getElementById('sidebar-nav');
            nav.innerHTML = '';
            
            Object.keys(modules).forEach(key => {
                const mod = modules[key];
                
                // Calculate module specific progress
                const modTotal = mod.steps.length;
                const modCompleted = mod.steps.filter(s => completed[s.id]).length;
                const isDone = modTotal === modCompleted && modTotal > 0;

                const btn = document.createElement('button');
                btn.className = `w-full text-left p-4 hover:bg-slate-50 transition-colors module-btn flex items-center justify-between group ${activeModule === key ? 'active' : 'text-slate-600'}`;
                btn.onclick = () => { 
                    activeModule = key; 
                    renderContent(); 
                    renderSidebar(); 
                    closeMobileMenu();
                };
                
                btn.innerHTML = `
                    <div class="flex items-center gap-3">
                        <i data-lucide="${mod.icon}" class="${activeModule === key ? 'text-orange-500' : 'text-slate-400'}"></i>
                        <span class="font-medium text-sm">${mod.title}</span>
                    </div>
                    ${isDone ? '<i data-lucide="check-circle-2" class="text-green-500 w-4 h-4"></i>' : ''}
                `;
                nav.appendChild(btn);
            });
            updateProgress();
            lucide.createIcons();
        }

        function renderContent() {
            const container = document.getElementById('main-content');
            const data = modules[activeModule];
            
            let html = `
                <div class="mb-8">
                    <div class="flex items-center gap-3 text-orange-600 mb-2">
                        <i data-lucide="${data.icon}" size="28"></i>
                        <h2 class="text-3xl font-bold text-slate-800">${data.title}</h2>
                    </div>
                    <p class="text-slate-500 text-lg border-l-4 border-orange-200 pl-4 py-1">${data.desc}</p>
                </div>
                <div class="space-y-4 max-w-4xl">
            `;

            data.steps.forEach(step => {
                const isChecked = completed[step.id];
                
                // Style definitions based on type
                let typeBadge = '';
                if(step.type === 'Video') typeBadge = '<span class="px-2 py-0.5 rounded text-[10px] font-bold tracking-wide uppercase bg-red-100 text-red-700">Video</span>';
                else if(step.type === 'Recipe') typeBadge = '<span class="px-2 py-0.5 rounded text-[10px] font-bold tracking-wide uppercase bg-orange-100 text-orange-700">Recipe</span>';
                else typeBadge = '<span class="px-2 py-0.5 rounded text-[10px] font-bold tracking-wide uppercase bg-blue-100 text-blue-700">Read</span>';

                html += `
                <div onclick="toggleComplete('${step.id}')" class="group bg-white border rounded-xl p-5 shadow-sm transition-all hover:shadow-md cursor-pointer flex gap-4 ${isChecked ? 'checkbox-checked border-green-200' : 'border-gray-200 hover:border-orange-300'}">
                    
                    <div class="mt-1">
                        <div class="w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${isChecked ? 'bg-green-500 border-green-500' : 'border-gray-300 group-hover:border-orange-400'}">
                            <i data-lucide="check" class="text-white w-4 h-4 ${isChecked ? 'block' : 'hidden'}"></i>
                        </div>
                    </div>

                    <div class="flex-1">
                        <div class="flex items-center gap-2 mb-1">
                            ${typeBadge}
                        </div>
                        <h3 class="text-lg font-semibold ${isChecked ? 'strikethrough' : 'text-slate-800'}">
                            ${step.title}
                        </h3>
                        <p class="text-sm text-slate-500 mt-1 mb-3">${step.note}</p>
                        
                        <a href="${step.link}" target="_blank" onclick="event.stopPropagation()" class="inline-flex items-center gap-1 text-sm font-semibold text-orange-600 hover:text-orange-800 hover:underline">
                            Open Resource <i data-lucide="external-link" class="w-3 h-3"></i>
                        </a>
                    </div>
                </div>`;
            });

            html += `</div>
                <div class="mt-10 p-4 bg-yellow-50 rounded-lg border border-yellow-100 flex gap-3 text-sm text-yellow-800">
                    <i data-lucide="lightbulb" class="flex-shrink-0"></i>
                    <div>
                        <strong>Pro Tip:</strong> Click the card itself to toggle the checkmark. Click "Open Resource" to visit the Baker Bettie page in a new tab.
                    </div>
                </div>
            `;

            container.innerHTML = html;
            lucide.createIcons();
        }

        // --- MOBILE MENU LOGIC ---
        const menuToggle = document.getElementById('menu-toggle');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');

        function openMobileMenu() {
            sidebar.classList.remove('-translate-x-full');
            overlay.classList.remove('hidden');
        }

        function closeMobileMenu() {
            sidebar.classList.add('-translate-x-full');
            overlay.classList.add('hidden');
        }

        menuToggle.addEventListener('click', openMobileMenu);
        overlay.addEventListener('click', closeMobileMenu);

        // --- INITIALIZATION ---
        renderSidebar();
        renderContent();

    </script>
</body>
</html>
